{"data":{"markdownRemark":{"id":"801d3fa3-f188-527c-bb4a-dea605973304","excerpt":"Introducci√≥n Todos los programadores web conocemos perfectamente el concepto de qu√© es  localhost , ya que diariamente trabajamos con el para acceder y probar‚Ä¶","html":"<h2>Introducci√≥n</h2>\n<p>Todos los programadores web conocemos perfectamente el concepto de qu√© es <em>localhost</em>, ya que diariamente trabajamos con el para acceder y probar nuestros sitios web.</p>\n<blockquote>\n<p><em>localhost</em> es el nombre del equipo local o <em>\"este equipo\"</em> el cual tiene la direcci√≥n IP <em>127.0.0.1</em>.</p>\n</blockquote>\n<p>Como todos sabemos, si ingresamos la URL <a href=\"http://localhost/\">http://localhost/</a> en el navegador estaremos accediendo al puerto 80 del equipo local y si tenemos un servidor web como <a href=\"https://httpd.apache.org/\">apache</a> o <a href=\"https://nginx.org/\">nginx</a> escuchando en ese puerto es probable que el navegador web nos muestre el sitio web que se encuentre configurado o en su defecto una p√°gina de prueba del servidor web.</p>\n<p>Y bueno, no es muy com√∫n ejecutar aplicaciones en el puerto 80 cuando estamos programando, generalmente utilizamos otro puerto como el 3000 o similares, esto nos proporciona la ventaja de ejecutar varias aplicaciones en el equipo local sin necesidad de tener un servidor remoto para la ejecuci√≥n de cada aplicaci√≥n.</p>\n<p>Un caso muy com√∫n hoy en d√≠a es el programar el frontend y el backend como proyectos separados, cada uno ejecutandose en un puerto independiente, lo que nos lleva a tener que utilizar dos URLs del tipo <a href=\"http://localhost:3000\">http://localhost:3000</a>, pero, <em>¬øno ser√≠a genial poder utilizar algo como <a href=\"http://demo-cc9a.com/\">http://demo-cc9a.com/</a> para acceder al frontend y <a href=\"http://api.demo-cc9a.com\">http://api.demo-cc9a.com</a> para la API/backend?</em> Podemos hacerlo üòé.</p>\n<h2>Primeros pasos</h2>\n<p>Vamos a realizar un redireccionamiento utilizando <a href=\"https://nginx.org/\">nginx</a> para que cuando ingresemos a <a href=\"http://demo-cc9a.com\">http://demo-cc9a.com</a> y <a href=\"http://api.demo-cc9a.com\">http://api.demo-cc9a.com</a> internamente el servidor web redireccione las peticiones al la direci√≥n local y puerto expuestas por <a href=\"https://www.docker.com/\">docker</a>.</p>\n<p>El ambiente que utilizaremos para la demostraci√≥n utilizar√° lo siguiente:</p>\n<ul>\n<li><a href=\"https://www.ubuntu.com/\">ubuntu</a> <code class=\"language-text\">v18.04.2 LTS</code></li>\n<li><a href=\"https://www.docker.com/\">docker</a> <code class=\"language-text\">v18.09.3</code></li>\n<li><a href=\"https://docs.docker.com/compose/\">docker-compose</a> <code class=\"language-text\">v1.23.2</code></li>\n<li><a href=\"https://www.git-scm.com/\">git</a> <code class=\"language-text\">v2.17.1</code></li>\n</ul>\n<h2>Instalar nginx</h2>\n<p>Vamos a comenzar instalando <a href=\"https://nginx.org/\">nginx</a> utilizando los siguientes comandos en la terminal.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> nginx</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Despu√©s de la instalaci√≥n procedemos a ingresar en el navegador web la url <a href=\"http://localhost\">http://localhost</a> donde deber√°s ver lo siguiente:</p>\n<blockquote>\n<p>TODO: agregar imagen del resultado de entrar a <a href=\"http://localhost\">http://localhost</a></p>\n</blockquote>\n<p>Esta es la p√°gina de ejemplo de nginx.</p>\n<h2>Primeros pasos</h2>\n<p>Como ya lo mencionamos, <em>localhost</em> es el <strong>hostname</strong> del equipo local que direcciona ‚Äî o utiliza internamente ‚Äî la direcci√≥n IP <strong>127.0.0.1</strong>, este direccionamiento se realiza a nivel sistema operativo gracias a un archivo de configuraci√≥n de nombre <strong>hosts</strong> que dependiendo de cada sistema operativo se encuentra en <a href=\"https://en.wikipedia.org/wiki/Hosts_(file)#Location_in_the_file_system\">diferente ubicaci√≥n</a>, este archivo es del tipo texto plano, lo que significa que lo puedes vizualizar y modificar con tu editor de textos preferido.</p>\n<p>Minimamente, este archivo contiene algo similar a lo siguiente:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">127.0.0.1  localhost\n::1        localhost</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>La anterior configuraci√≥n es tan simple como decir que la direcci√≥n IP <em>127.0.0.1</em> es utilizada por el hostname <em>localhost</em>, si agregamos cualquier hostname despu√©s del hostname <em>localhost</em> estaremos mapeando esa palabra hacia la direcci√≥n IP local 127.0.0.1.</p>\n<p>Vamos, intenta agregar el hostname <em>mi-pagina-local.com</em> y luego ingresa a esa URL en el navegador.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">127.0.0.1  localhost mi-pagina-local.com\n::1        localhost</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Ver√°s que se muestra lo mismo que al entrar a <a href=\"http://localhost/\">http://localhost/</a>.</p>\n<p>Ahora bien, podemos sacar ventaja de esto para dejar de acceder a las aplicaciones web utilizando <a href=\"http://localhost:3000/\">http://localhost:3000/</a> y podemos utilizar algo como lo que mencion√© anteriormente. Vamos a agregar una nueva configuraci√≥n al archivo hosts para mapear la direcci√≥n IP local con unos nuevos hostnames:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">127.0.0.1  localhost mi-pagina-local.com\n::1        localhost\n\n<span class=\"token comment\"># Configuraci√≥n de host para aplicaciones</span>\n127.0.0.1  tiendita.com\n127.0.0.1  api.tiendita.com</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<blockquote>\n<p><strong>NOTA: El archivo hosts es un archivo del sistema operativo, por lo que si quieres modificarlo deber√°s hacerlo con permisos de administrador o root.</strong></p>\n</blockquote>\n<p>Probemos acceder a <a href=\"http://tiendita.com:3000/\">http://tiendita.com:3000/</a> o <a href=\"http://api.tiendita.com:3001/\">http://api.tiendita.com:3001/</a> en el navegador web, veremos lo mismo que <a href=\"http://localhost/\">http://localhost/</a>. Los puertos no parecen nada a lo que podamos llamar URLs amigables.</p>\n<h2>Proxy Pass ‚Äî o redireccionando la URL ‚Äî</h2>\n<p>NGINX permite redireccionar una URL hacia otra...</p>\n<p><img src=\"./nginx-success.png\" alt=\"Barra de progreso de npm\"></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">cd</span> /etc/nginx</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"conf\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-conf line-numbers\"><code class=\"language-conf\">user www-data;\nworker_processes auto;\npid /run/nginx.pid;\ninclude /etc/nginx/modules-enabled/*.conf;\n\nevents {\n\tworker_connections 768;\n\t# multi_accept on;\n}\n\nhttp {\n\n\t##\n\t# Basic Settings\n\t##\n\n\tsendfile on;\n\ttcp_nopush on;\n\ttcp_nodelay on;\n\tkeepalive_timeout 65;\n\ttypes_hash_max_size 2048;\n\t# server_tokens off;\n\n\t# server_names_hash_bucket_size 64;\n\t# server_name_in_redirect off;\n\n\tinclude /etc/nginx/mime.types;\n\tdefault_type application/octet-stream;\n\n\t##\n\t# SSL Settings\n\t##\n\n\tssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE\n\tssl_prefer_server_ciphers on;\n\n\t##\n\t# Logging Settings\n\t##\n\n\taccess_log /var/log/nginx/access.log;\n\terror_log /var/log/nginx/error.log;\n\n\t##\n\t# Gzip Settings\n\t##\n\n\tgzip on;\n\n\t# gzip_vary on;\n\t# gzip_proxied any;\n\t# gzip_comp_level 6;\n\t# gzip_buffers 16 8k;\n\t# gzip_http_version 1.1;\n\t# gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;\n\n\t##\n\t# Virtual Host Configs\n\t##\n\n\tinclude /etc/nginx/conf.d/*.conf;\n\tinclude /etc/nginx/sites-enabled/*;\n}\n\n\n#mail {\n#\t# See sample authentication script at:\n#\t# http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript\n# \n#\t# auth_http localhost/auth.php;\n#\t# pop3_capabilities &quot;TOP&quot; &quot;USER&quot;;\n#\t# imap_capabilities &quot;IMAP4rev1&quot; &quot;UIDPLUS&quot;;\n# \n#\tserver {\n#\t\tlisten     localhost:110;\n#\t\tprotocol   pop3;\n#\t\tproxy      on;\n#\t}\n# \n#\tserver {\n#\t\tlisten     localhost:143;\n#\t\tprotocol   imap;\n#\t\tproxy      on;\n#\t}\n#}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","frontmatter":{"title":"URLs amigables utilizando NGINX y docker","date":"December 04, 2018","description":"Hello World"}}},"pageContext":{"slug":"/nginx-docker-first-version/","previous":{"fields":{"slug":"/hello-world/"},"frontmatter":{"title":"Hello World","date":"2015-05-01T22:12:03.284Z","description":"Hello World","path":"/hello-world/","cover":"7cfc"}},"next":null,"cover":"cc9a"}}